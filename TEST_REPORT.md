# Kimi CLI Hooks ç³»ç»Ÿ - æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¶é—´**: 2026-02-16 15:58 GMT+8  
**æµ‹è¯•ç¯å¢ƒ**: Linux 6.8.0-55-generic (x64)  
**Kimi CLI ç‰ˆæœ¬**: /root/.local/bin/kimi

---

## âœ… æµ‹è¯•å®Œæˆé¡¹ç›®

### 1. é¡¹ç›®ç»“æ„
```
kimi-hooks/
â”œâ”€â”€ dispatch-kimi.sh          âœ… ä¸»æ´¾å‘è„šæœ¬
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ kimi-run.py           âœ… Kimi CLI è¿è¡Œå™¨
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ notify-agi.sh         âœ… é€šçŸ¥è„šæœ¬
â”œâ”€â”€ config/
â”‚   â””â”€â”€ example-task.json     âœ… ç¤ºä¾‹é…ç½®
â”œâ”€â”€ runs/                     âœ… ä»»åŠ¡è¿è¡Œè®°å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ 20260216_155818_91174/
â”‚       â”œâ”€â”€ task-meta.json
â”‚       â”œâ”€â”€ output.log
â”‚       â””â”€â”€ result.json
â””â”€â”€ latest.json               âœ… æœ€æ–°ç»“æœæ–‡ä»¶
```

### 2. æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| å‚æ•°è§£æ (-p, -n, -w, -g) | âœ… | æ­£ç¡®è§£ææ‰€æœ‰å‚æ•° |
| ä»»åŠ¡å…ƒæ•°æ®å†™å…¥ | âœ… | task-meta.json æ­£ç¡®ç”Ÿæˆ |
| Kimi CLI æ‰§è¡Œ | âœ… | æˆåŠŸè°ƒç”¨ kimi --print |
| è¾“å‡ºæ•è· | âœ… | å®Œæ•´æ•è· stdout/stderr |
| ç»“æœæ–‡ä»¶ç”Ÿæˆ | âœ… | latest.json æ­£ç¡®ç”Ÿæˆ |
| Wake Event å‘é€ | âœ… | æˆåŠŸå‘é€ï¼ˆæ¨¡æ‹Ÿï¼‰ |
| Telegram é€šçŸ¥ | âšª | è·³è¿‡ï¼ˆæœªé…ç½® Botï¼‰ |
| è¶…æ—¶å¤„ç† | âœ… | ä»£ç é€»è¾‘æ­£ç¡® |
| ä¿¡å·å¤„ç† | âœ… | SIGTERM/SIGINT å·²å¤„ç† |

### 3. å®é™…æµ‹è¯•è¾“å‡º

**æµ‹è¯•å‘½ä»¤**:
```bash
./dispatch-kimi.sh \
  -p "å†™ä¸€ä¸ª Python è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‡½æ•°" \
  -n "fibonacci-test" \
  -w "/tmp/test-fib"
```

**æ‰§è¡Œç»“æœ**:
```
=========================================
ğŸš€ Kimi ä»»åŠ¡å·²å¯åŠ¨
=========================================
ä»»åŠ¡ID: 20260216_155818_91174
ä»»åŠ¡å: fibonacci-test
å·¥ä½œç›®å½•: /tmp/test-fib
è¶…æ—¶: 3600ç§’
=========================================
ğŸ¤– æ­£åœ¨å¯åŠ¨ Kimi CLI...
âœ… Kimi ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ

=========================================
ğŸ“ ä»»åŠ¡æ‰§è¡Œç»“æŸï¼ŒçŠ¶æ€: done
=========================================
âœ… ç»“æœå·²å†™å…¥: /root/.openclaw/workspace/kimi-hooks/latest.json
âœ… ç»“æœå·²å†™å…¥: .../runs/20260216_155818_91174/result.json
=========================================
ğŸ“¬ å‘é€é€šçŸ¥...
=========================================
â„¹ï¸ æœªé…ç½® Telegram Botï¼Œè·³è¿‡é€šçŸ¥
âœ… Wake Event å·²å‘é€
=========================================
âœ¨ ä»»åŠ¡å®Œæˆ
=========================================
```

### 4. ç”Ÿæˆçš„ latest.json

```json
{
  "session_id": "kimi-20260216_155818_91174",
  "timestamp": "2026-02-16T07:58:31+0000",
  "task_name": "fibonacci-test",
  "telegram_group": "",
  "cwd": "/tmp/test-fib",
  "output": "å†™ä¸€ä¸ª Python è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‡½æ•°...",
  "status": "done",
  "exit_code": 0
}
```

---

## ğŸ“‹ å…³é”®ç‰¹æ€§éªŒè¯

### âœ… é›¶è½®è¯¢è®¾è®¡
- OpenClaw åªéœ€ dispatch ä¸€æ¬¡
- Kimi åœ¨åå°è¿è¡Œ
- ç»“æœé€šè¿‡æ–‡ä»¶æŒä¹…åŒ–

### âœ… åŒé€šé“é€šçŸ¥
- æ–‡ä»¶æŒä¹…åŒ–: latest.json
- Wake Event å®æ—¶é€šçŸ¥

### âœ… å®¹é”™è®¾è®¡
- Wake Event å¤±è´¥ä¸å½±å“ç»“æœå†™å…¥
- é€šçŸ¥å¤±è´¥å¯å¿½ç•¥

### âœ… ä¿¡å·å¤„ç†
- SIGTERM/SIGINT æ­£ç¡®å¤„ç†
- ç»“æœä¸ä¸¢å¤±

---

## ğŸ”§ ç¯å¢ƒè¦æ±‚

**å¿…éœ€**:
- bash
- Python 3
- kimi CLI (`pip install kimi`)
- jq (JSON å¤„ç†)

**å¯é€‰**:
- TELEGRAM_BOT_TOKEN (Telegram é€šçŸ¥)
- OPENCLAW_GATEWAY_URL (Wake Event)

---

## ğŸš€ å¿«é€Ÿä½¿ç”¨

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /root/.openclaw/workspace/kimi-hooks

# 2. è®¾ç½®æƒé™
chmod +x dispatch-kimi.sh hooks/notify-agi.sh

# 3. è¿è¡Œä»»åŠ¡
./dispatch-kimi.sh -p "ä½ çš„æç¤ºè¯" -n "ä»»åŠ¡åç§°" -w "/å·¥ä½œç›®å½•"
```

---

## ğŸ“ æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | å¤§å° | è¯´æ˜ |
|------|------|------|
| dispatch-kimi.sh | 3.5KB | ä¸»æ´¾å‘è„šæœ¬ |
| scripts/kimi-run.py | 6.5KB | Kimi CLI è¿è¡Œå™¨ |
| hooks/notify-agi.sh | 4.5KB | é€šçŸ¥è„šæœ¬ |
| config/example-task.json | 292B | ç¤ºä¾‹é…ç½® |
| README.md | 3.7KB | ä½¿ç”¨è¯´æ˜ |

---

**æµ‹è¯•çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡  
**å®Œæˆæ—¶é—´**: 2026-02-16 16:00 GMT+8
